<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Registrar - Students Requests</title>

    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/images/svdfc-logo.png}">

    <!-- Custom CSS -->
    <link th:href="@{/css/userpageCSS/style.min.css}" rel="stylesheet">
    <link th:href="@{/css/croppie.css}" rel="stylesheet">
    <link th:href="@{/css/userpageCSS/dataTables.bootstrap4.css}" rel="stylesheet" />
    <style>
        .file-upload {
            background-color: #ffffff;
            width: 100%;
            margin: 0 auto;
            padding: 20px;
        }

        .file-upload-btn {
            width: 100%;
            margin: 0;
            color: #fff;
            background: #DC143C;
            border: none;
            padding: 10px;
            border-radius: 4px;
            border-bottom: 4px solid #DC143C;
            transition: all .2s ease;
            outline: none;
            text-transform: uppercase;
            font-weight: 700;
        }

        .file-upload-btn:hover {
            background: #dc143cbd;
            color: #ffffff;
            transition: all .2s ease;
            cursor: pointer;
        }

        .file-upload-btn:active {
            border: 0;
            transition: all .2s ease;
        }


        .file-upload-input {
            position: absolute;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            outline: none;
            opacity: 0;
            cursor: pointer;
        }

        .file-upload-wrap {
            margin-top: 20px;
            border: 4px dashed #DC143C;
            position: relative;
        }

        .file-dropping,
        .file-upload-wrap:hover {
            background-color: #dd7c8f;
            border: 4px dashed #ffffff;
        }

        .image-title-wrap {
            padding: 0 15px 15px 15px;
            color: #222;
        }

        .drag-text {
            text-align: center;
        }

        .drag-text h3 {
            font-weight: 100;
            text-transform: uppercase;
            color: #DC143C;
            padding: 60px 0;
        }

        .file-upload-image {
            max-height: 200px;
            max-width: 200px;
            margin: auto;
            padding: 20px;
        }


        #loading-modal {
            display: none;
            position: fixed;
            top: 63px;
            left: 62px;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }



        .spinner-export {
            border: 16px solid #f3f3f3;
            border-top: 16px solid #DC143C;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            animation: spin 2s linear infinite;
            margin: auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>



<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
            <path
                d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
        </symbol>
        <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
            <path
                d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" />
        </symbol>
        <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
            <path
                d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
        </symbol>
    </svg>

    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
        data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full" class="">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <header class="topbar" data-navbarbg="skin5">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header" data-logobg="skin5">

                    <!-- ============================================================== -->
                    <!-- Logo -->
                    <!-- ============================================================== -->
                    <a class="navbar-brand" href="/registrar/dashboard">


                        <b class="logo-icon">

                            <img height="50px" th:src="@{/images/svdfc-logo.png}" alt="homepage"
                                class="img-responsive light-logo" />

                        </b>

                        <span class="logo-text text-dark logoText">
                            SVFC - RDMS
                        </span>


                    </a>
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- Toggle which is visible on mobile only -->
                    <!-- ============================================================== -->
                    <a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)"><i
                            class="ti-menu ti-close"></i></a>
                </div>
                <!-- ============================================================== -->
                <!-- End Logo -->
                <!-- ============================================================== -->
                <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin5">
                    <!-- ============================================================== -->
                    <!-- toggle and nav items -->
                    <!-- ============================================================== -->
                    <ul class="navbar-nav float-start me-auto">
                        <li class="nav-item d-none d-lg-block"><a
                                class="nav-link sidebartoggler waves-effect waves-light" href="javascript:void(0)"
                                data-sidebartype="mini-sidebar"><i class="mdi mdi-menu font-24"></i></a></li>

                    </ul>
                    <!-- ============================================================== -->
                    <!-- Right side toggle and nav items -->
                    <!-- ============================================================== -->
                    <ul class="navbar-nav float-end">


                        <!-- ============================================================== -->
                        <!-- User profile and search -->
                        <!-- ============================================================== -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle text-muted waves-effect waves-dark pro-pic" href="#"
                                id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <img id="profilePicture" src="../../assets/images/users/1.jpg" alt="user"
                                    class="rounded-circle" width="31">
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end user-dd animated"
                                aria-labelledby="navbarDropdown">
                                <hr class="devider">
                                <div th:if="${#session.getAttribute('username')!=null}">

                                    <label th:with="name=${#session.getAttribute('name')}"
                                        class="dropdown-item bg-success border border-1 b-2 text-white">
                                        Name:
                                        <strong id="nameVal">[[${name}]]</strong>
                                    </label>
                                    <label th:with="type=${#session.getAttribute('accountType')}"
                                        class="dropdown-item bg-primary border  border-1 b-2 text-white">Account
                                        Type
                                        :[[${type}]]</label>
                                </div>

                                <a class="dropdown-item changeAccountPassword" href="javascript:void(0)"><i
                                        class="ti-settings me-1 ms-1"></i>
                                    Change Password</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item changeAccountProfile" href="javascript:void(0)"><i
                                        class="ti-settings me-1 ms-1"></i>
                                    Change Profile Picture</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="/logout"><i class="fa fa-power-off me-1 ms-1"></i>
                                    Logout</a>
                                <div class="dropdown-divider"></div>

                            </ul>
                        </li>
                        <!-- ============================================================== -->
                        <!-- User profile and search -->
                        <!-- ============================================================== -->
                    </ul>
                </div>
            </nav>

            <rside class="sidebar">
                <button class="rightSidebarToggle btn">
                    <i id="btnIcon" class="fas fa-angle-left text-white"></i>
                </button>

                <div class="row" id="r_row1">
                    <div class="col-7" style="width:50.333333% !important;margin-top: -10px ;
                         margin-bottom: 50px;">
                        <div class="card  ">
                            <div class="card-body">

                                <div class="dropdown">
                                    <a class="nav-link  text-muted waves-effect waves-dark pro-pic" href="#"
                                        id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <img th:src="@{/images/userImage.png}" alt="user" class="rounded-circle"
                                            width="31">
                                    </a>
                                    <span th:with="name=${#session.getAttribute('name')}"
                                        class="dropdown-item bg-success border border-1 b-2 text-white">
                                        Name:
                                        <strong id="nameVal">[[${name}]]</strong>
                                    </span>
                                    <span th:with="type=${#session.getAttribute('accountType')}"
                                        class="dropdown-item bg-primary border  border-1 b-2 text-white">Account
                                        Type
                                        :[[${type}]]</sp>

                                        <div class="dropdown-menu">

                                            <a class="dropdown-item changeAccountPassword" href="javascript:void(0)"><i
                                                    class="ti-settings me-1 ms-1"></i>
                                                Change Password</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item changeAccountProfile" href="javascript:void(0)"><i
                                                    class="ti-settings me-1 ms-1"></i>
                                                Change Profile Picture</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="/logout"><i
                                                    class="fa fa-power-off me-1 ms-1"></i>
                                                Logout</a>
                                        </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-7" style="width:50.333333% !important">
                        <div class="card  dateTimeCard">
                            <div class="card-body">

                                <div class="todo-widget text-center" style="height:20px;">
                                    <h4 class="text-danger" id="dayValueRightBar">Today is Monday</h4>
                                    <span class="text-danger" id="dateValueRightBar">00/00/2022</span>
                                </div>
                                <div class="todo-widget text-black-50 text-center" style="height:20px;">

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-7" style="width:50.333333% !important">
                        <div class="card ">
                            <div class="card-body">
                                <h4 class="card-title ">Notifications</h4>
                                <hr class="hr">
                                <div class="notificationCard">
                                    <a href="javascript:void(0)" class="link border-top">
                                        <div class="d-flex no-block align-items-center p-10">
                                            <span class="btn btn-success btn-circle">
                                                <i class="ti-check-box"></i>
                                            </span>
                                            <div class="ms-2 mainNotificationInfo">
                                                <h5 class="mb-0 title">Requests Status</h5>
                                                <span class="description"></span>
                                            </div>
                                        </div>
                                    </a>
                                    <hr class="hr">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </rside>
        </header>
        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <aside class="left-sidebar" data-sidebarbg="skin5">
            <!-- Sidebar scroll-->
            <div class="scroll-sidebar">
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav">
                    <ul id="sidebarnav" class="pt-4">
                        <li title="Home" class="sidebar-item"> <a
                                class="sidebar-link waves-effect waves-dark sidebar-link" href="/registrar/dashboard"
                                aria-expanded="false"><i class="fas fa-home"></i><span class="hide-menu">Home</span></a>
                        </li>

                        <li title="Manage Request" class="sidebar-item"> <a
                                class="sidebar-link has-arrow waves-effect waves-dark " href="javascript:void(0)"
                                aria-expanded="false"><i class="fas fa-list"></i><span class="hide-menu">Manage
                                    Requests</span></a>
                            <ul aria-expanded="false" class="collapse  first-level">
                                <li title="Student Requests" class="sidebar-item"><a href="/registrar/studrequest"
                                        class="sidebar-link"><i class="fas fa-table"></i><span
                                            class="hide-menu">Students Requests
                                        </span></a></li>
                                <li title="Sent Requests" class="sidebar-item"><a href="/registrar/sent-requests"
                                        class="sidebar-link active"><i class=" far fa-paper-plane"></i><span
                                            class="hide-menu">Sent Requests
                                        </span></a></li>

                            </ul>
                        </li>

                        <li title="Manage Accounts" class="sidebar-item"> <a
                                class="sidebar-link has-arrow waves-effect waves-dark " href="javascript:void(0)"
                                aria-expanded="false"><i class=" fas fa-users"></i><span class="hide-menu ">Manage
                                    Accounts</span></a>
                            <ul aria-expanded="false" class="collapse  first-level">
                                <li title="Students" class="sidebar-item"><a href="/registrar/student/accounts"
                                        class="sidebar-link"><i class=" fas fa-user-plus"></i><span
                                            class="hide-menu">Students
                                        </span></a></li>

                                <li title="Teachers" class="sidebar-item"><a href="/registrar/teacher/accounts"
                                        class="sidebar-link"><i class=" fas fa-user-plus"></i><span class="hide-menu">
                                            Teachers
                                        </span></a></li>

                            </ul>
                        </li>



                        <li title="My Files" class="sidebar-item"><a href="/registrar/my-files" class="sidebar-link"><i
                                    class="fas fa-file"></i><span class="hide-menu"> My Files
                                </span></a></li>
                        <li class="sidebar-item"><a href="/registrar/documents-list" class="sidebar-link"><i
                                    class="fas fa-folder"></i><span class="hide-menu">Manage Documents
                                </span></a></li>
                        <li title="Notifications" class="sidebar-item"><a href="#" class="sidebar-link notifLink"><i
                                    class=" fas fa-bell"></i><span class="hide-menu">Notifications
                                </span></a></li>

                        <li title="Logout" class="sidebar-item "><a href="/logout" class="sidebar-link"><i
                                    class="fas fa-power-off"></i><span class="hide-menu">Logout
                                </span></a></li>

                </nav>
                <!-- End Sidebar navigation -->
            </div>
            <!-- End Sidebar scroll-->
        </aside>
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb">
                <div class="row">
                    <div class="col-12 d-flex no-block align-items-center">
                        <h4 class="page-title">Student Requests</h4>
                        <div class="ms-auto text-end">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="/registrar/dashboard">Home</a></li>
                                    <li class="breadcrumb-item" aria-current="page">Manage Requests</li>
                                    <li class="breadcrumb-item active" aria-current="page">Student Requests</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <div class="card">
                    <!-- Error Display by ajax -->

                    <div class="card-header">

                        <div class="d-flex flex-row-reverse">

                            <div class="">

                                <a href="javascript:void(0)" class="btn btn-primary export-link">Export All Student
                                    Requests</a>



                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">Student Requests</h5>
                        <div class="table-responsive">
                            <table id="zero_config" class="table table-striped table-bordered text-center">
                                <thead>
                                    <tr>

                                        <th>Requested By</th>
                                        <th>Request Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>


                                    </tr>
                                </thead>

                                <tbody>
                                    <tr th:each="studRequest : ${studentreq}">

                                        <td th:text="${studRequest.requestBy}"></td>
                                        <td th:text="${studRequest.requestDate}"></td>
                                        <td th:text="${studRequest.requestStatus}"></td>
                                        <td>
                                            <div class="row">

                                                <div class="col-sm">
                                                    <a th:href="@{'?s='+${studRequest.studentId}+'&req='+${studRequest.requestId}}"
                                                        type="button" class="btn btn-primary w-100 toggleRequestDetail">
                                                        Details</a>

                                                </div>
                                                <div class="col-sm" th:if="${studRequest.requestStatus =='Pending'}">
                                                    <a th:href="@{${studRequest.studentId}}"
                                                        th:data-value="@{${studRequest.requestId}}" type="button"
                                                        class="btn btn-success  w-100 text-white processBtn">
                                                        Approved</a>
                                                </div>
                                                <div class="col-sm" th:if="${studRequest.requestStatus =='On-Going'}">
                                                    <a th:href="@{${studRequest.studentId}}"
                                                        th:data-value="@{${studRequest.requestId}}" type="button"
                                                        class="btn btn-success  w-100 text-white completeBtn">
                                                        Complete</a>
                                                </div>
                                                <div class="col-sm"
                                                    th:if="${studRequest.requestStatus !='On-Going' && studRequest.requestStatus !='Approved' && studRequest.requestStatus !='Rejected'}">
                                                    <a th:href="@{${studRequest.studentId}}"
                                                        th:data-value="@{${studRequest.requestId}}" type="button"
                                                        class="btn btn-danger w-100 text-white  rejectBtn">
                                                        Reject</a>
                                                </div>
                                            </div>

                                        </td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>

                    </div>
                </div>
            </div>

        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    </div>
    <!-- Modal -->
    <div class="modalView">

    </div>


    <!-- HTML for the export link -->
    <script type="text/javascript" th:src="@{/js/jquery.js}"></script>
    <script type="text/javascript" th:src="@{/js/croppie.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap.bundle.js}"></script>
    <script type="text/javascript" th:src="@{/js/userpageJS/perfect-scrollbar.jquery.min.js}"></script>

    <script type="text/javascript" th:src="@{/js/userpageJS/waves.js}"></script>
    <script type="text/javascript" th:src="@{/js/userpageJS/sidebarmenu.js}"></script>
    <script type="text/javascript" th:src="@{/js/userpageJS/custom.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/userpageJS/datatables.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/manage_request_js-ajax-jquery/r_request_list.js}"></script>
    <script>

        $('#zero_config').DataTable();


        $(document).ready(function () {
            var modalView = $(".modalView");

            $(".export-link").click(function () {

                var htmlModal = `<div class="modal fade" id="exportedModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exportedModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        
        <div class="modal-body">
            
                <div class="spinner-export"></div>
                <p style="margin: auto;">Please wait while your file is being generated...</p>
           
        </div>
       
      </div>
    </div>
  </div>`;
                modalView.append(htmlModal);
                // Show the loading modal
                $("#exportedModal").modal("toggle");


                setTimeout(function () {
                    $("#exportedModal").modal("hide");
                  
                    window.location.href = "/registrar/student-request-export/all";
                }, 1000);
            });
        });



    </script>
</body>

</html>